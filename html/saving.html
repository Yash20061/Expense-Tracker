<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ExpensePro | Budget & Savings</title>
  <!-- Same styles as dashboard -->
  <link rel="stylesheet" href="/css/saving.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <div class="dashboard-container">
    <!-- Updated Sidebar with renamed items -->
    <div class="sidebar">
      <div class="logo">
        <i class="fas fa-wallet"></i>
        <span>ExpensePro</span>
      </div>
      <ul class="nav-menu">
        <li class="nav-item">
          <a href="dashboard.html" class="nav-link">
            <i class="fas fa-home"></i>
            <span>Dashboard</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="expense-tracker.html" class="nav-link">
            <i class="fas fa-exchange-alt"></i>
            <span>Transactions</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="saving.html" class="nav-link active">
            <i class="fas fa-chart-bar"></i>
            <span>Budget & Savings</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="income.html" class="nav-link">
            <i class="fas fa-piggy-bank"></i>
            <span>Income Management</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="reminder.html" class="nav-link">
            <i class="fas fa-bell"></i>
            <span>Reminders</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="reports.html" class="nav-link">
            <i class="fas fa-chart-bar"></i>
            <span>Reports</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="Shared_Expance.html" class="nav-link">
            <i class="fas fa-users"></i>
            <span>Shared</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="Chatbot.html" class="nav-link">
            <i class="fas fa-robot"></i>
            <span>AI Assistant</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="settings.html" class="nav-link">
            <i class="fas fa-cog"></i>
            <span>Settings</span>
          </a>
        </li>
      </ul>
    </div>

    <!-- Main Content - Budget & Savings -->
    <div class="main-content">
      <div class="header">
        <h1 class="page-title">Budget & Savings</h1>
        <div class="user-menu">
          <button class="notification-btn">
            <i class="fas fa-bell"></i>
            <span class="notification-badge">3</span>
          </button>
          <div class="user-avatar">JS</div>
        </div>
      </div>

      <div class="budget-header">
        <div>
          <h2 style="font-size: 1.1rem; margin-bottom: 0.5rem;">April 2024 Budget</h2>
          <p style="font-size: 0.85rem; color: var(--dark-gray);">Track your spending against your budget goals</p>
        </div>
        <div class="budget-actions">
          <button class="btn btn-primary">
            <i class="fas fa-plus"></i> Create Budget
          </button>
          <button class="btn btn-outline">
            <i class="fas fa-cog"></i> Settings
          </button>
        </div>
      </div>

      <div class="budget-grid">
        <!-- Budget Overview -->
        <div class="budget-card budget-overview">
          <div class="budget-card-header">
            <h2 class="budget-card-title">Monthly Budget Overview</h2>
            <div class="budget-card-actions">
              <button><i class="fas fa-ellipsis-h"></i></button>
            </div>
          </div>
          <div class="budget-progress">
            <div class="progress-bar warning" style="width: 78%"></div>
          </div>
          <div class="budget-details">
            <span>₹15,600 spent</span>
            <span>₹20,000 limit</span>
          </div>
          <div class="budget-details">
            <span>₹4,400 remaining</span>
            <span>₹2,200/day suggested</span>
          </div>
          <div class="chart-placeholder" style="height: 200px; margin-top: 1rem;">
            [Budget vs Actual Spending Chart]
          </div>
        </div>

        <!-- Budget Categories -->
        <div class="budget-card budget-categories">
          <div class="budget-card-header">
            <h2 class="budget-card-title">Budget by Category</h2>
            <div class="budget-card-actions">
              <button><i class="fas fa-ellipsis-h"></i></button>
            </div>
          </div>
          <div class="budget-category">
            <div class="category-info">
              <div class="category-icon">
                <i class="fas fa-utensils"></i>
              </div>
              <div>
                <div class="category-name">Food</div>
                <div class="category-progress">
                  <div class="category-progress-bar" style="width: 85%"></div>
                </div>
              </div>
            </div>
            <div class="category-amount">₹4,250/₹5,000</div>
          </div>
          <div class="budget-category">
            <div class="category-info">
              <div class="category-icon">
                <i class="fas fa-home"></i>
              </div>
              <div>
                <div class="category-name">Housing</div>
                <div class="category-progress">
                  <div class="category-progress-bar" style="width: 100%"></div>
                </div>
              </div>
            </div>
            <div class="category-amount">₹8,000/₹8,000</div>
          </div>
          <div class="budget-category">
            <div class="category-info">
              <div class="category-icon">
                <i class="fas fa-gas-pump"></i>
              </div>
              <div>
                <div class="category-name">Transport</div>
                <div class="category-progress">
                  <div class="category-progress-bar" style="width: 60%"></div>
                </div>
              </div>
            </div>
            <div class="category-amount">₹1,200/₹2,000</div>
          </div>
          <div class="budget-category">
            <div class="category-info">
              <div class="category-icon">
                <i class="fas fa-shopping-bag"></i>
              </div>
              <div>
                <div class="category-name">Shopping</div>
                <div class="category-progress">
                  <div class="category-progress-bar warning" style="width: 75%"></div>
                </div>
              </div>
            </div>
            <div class="category-amount">₹1,500/₹2,000</div>
          </div>
        </div>

        <!-- Savings Goals -->
        <div class="budget-card savings-card">
          <div class="budget-card-header">
            <h2 class="budget-card-title">Savings Goals</h2>
            <div class="budget-card-actions">
              <button><i class="fas fa-plus"></i> Add Goal</button>
            </div>
          </div>
          <div class="savings-goals">
            <div class="goal-card">
              <div class="goal-header">
                <div class="goal-title">Emergency Fund</div>
                <i class="fas fa-shield-alt" style="color: var(--primary-color);"></i>
              </div>
              <div class="goal-amount">₹12,500/₹50,000</div>
              <div class="goal-progress">
                <div class="goal-progress-bar" style="width: 25%"></div>
              </div>
              <div class="goal-details">
                <span>25% completed</span>
                <span>₹37,500 remaining</span>
              </div>
            </div>
            <div class="goal-card">
              <div class="goal-header">
                <div class="goal-title">Vacation</div>
                <i class="fas fa-umbrella-beach" style="color: var(--warning-color);"></i>
              </div>
              <div class="goal-amount">₹7,000/₹20,000</div>
              <div class="goal-progress">
                <div class="goal-progress-bar" style="width: 35%"></div>
              </div>
              <div class="goal-details">
                <span>35% completed</span>
                <span>₹13,000 remaining</span>
              </div>
            </div>
            <div class="goal-card">
              <div class="goal-header">
                <div class="goal-title">New Laptop</div>
                <i class="fas fa-laptop" style="color: var(--dark-gray);"></i>
              </div>
              <div class="goal-amount">₹15,000/₹60,000</div>
              <div class="goal-progress">
                <div class="goal-progress-bar" style="width: 25%"></div>
              </div>
              <div class="goal-details">
                <span>25% completed</span>
                <span>₹45,000 remaining</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Quick Add Button (Same as dashboard) -->
      <div class="quick-add">
        <button class="add-btn">
          <i class="fas fa-plus"></i>
        </button>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      console.log('Budget & Savings page loaded');
      
      // Example of dynamic content loading
      // fetch('/api/budget-data')
      //   .then(response => response.json())
      //   .then(data => {
      //     // Update the UI with real data
      //   });
    });

    document.addEventListener('DOMContentLoaded', function() {
  // DOM Elements
  const createBudgetBtn = document.querySelector('.budget-actions .btn-primary');
  const settingsBtn = document.querySelector('.budget-actions .btn-outline');
  const notificationBtn = document.querySelector('.notification-btn');
  const quickAddBtn = document.querySelector('.quick-add .add-btn');
  const addGoalBtn = document.querySelector('.savings-card .budget-card-actions button');
  const budgetCards = document.querySelectorAll('.budget-card');

  // Sample data for budgets and savings
  const budgetData = {
    monthlyBudget: {
      total: 20000,
      spent: 15600,
      remaining: 4400,
      dailySuggested: 2200,
      categories: [
        { name: 'Food', icon: 'fa-utensils', budget: 5000, spent: 4250, color: 'var(--primary-color)' },
        { name: 'Housing', icon: 'fa-home', budget: 8000, spent: 8000, color: 'var(--success-color)' },
        { name: 'Transport', icon: 'fa-gas-pump', budget: 2000, spent: 1200, color: 'var(--accent-color)' },
        { name: 'Shopping', icon: 'fa-shopping-bag', budget: 2000, spent: 1500, color: 'var(--warning-color)' }
      ]
    },
    savingsGoals: [
      { 
        id: 1,
        name: 'Emergency Fund', 
        icon: 'fa-shield-alt', 
        target: 50000, 
        saved: 12500,
        color: 'var(--primary-color)'
      },
      { 
        id: 2,
        name: 'Vacation', 
        icon: 'fa-umbrella-beach', 
        target: 20000, 
        saved: 7000,
        color: 'var(--warning-color)'
      },
      { 
        id: 3,
        name: 'New Laptop', 
        icon: 'fa-laptop', 
        target: 60000, 
        saved: 15000,
        color: 'var(--dark-gray)'
      }
    ]
  };

  // Initialize the page
  function init() {
    renderBudgetData();
    renderSavingsGoals();
    setupEventListeners();
    updateNotificationBadge();
  }

  // Set up event listeners
  function setupEventListeners() {
    // Budget buttons
    createBudgetBtn.addEventListener('click', showCreateBudgetModal);
    settingsBtn.addEventListener('click', showBudgetSettings);
    
    // Savings goal button
    addGoalBtn.addEventListener('click', showAddGoalModal);
    
    // Notification button
    notificationBtn.addEventListener('click', toggleNotifications);
    
    // Quick add button
    quickAddBtn.addEventListener('click', showQuickAddMenu);
    
    // Budget card actions
    budgetCards.forEach(card => {
      const actionBtn = card.querySelector('.budget-card-actions button');
      if (actionBtn) {
        actionBtn.addEventListener('click', function(e) {
          e.stopPropagation();
          showCardOptionsMenu(this, card);
        });
      }
    });
  }

  // Render budget data
  function renderBudgetData() {
    const { total, spent, remaining, dailySuggested, categories } = budgetData.monthlyBudget;
    
    // Update overview card
    const overviewCard = document.querySelector('.budget-overview');
    overviewCard.querySelector('.progress-bar').style.width = `${(spent / total) * 100}%`;
    overviewCard.querySelectorAll('.budget-details span:nth-child(1)').forEach((el, i) => {
      el.textContent = i === 0 ? 
        `₹${spent.toLocaleString('en-IN')} spent` : 
        `₹${remaining.toLocaleString('en-IN')} remaining`;
    });
    overviewCard.querySelectorAll('.budget-details span:nth-child(2)').forEach((el, i) => {
      el.textContent = i === 0 ? 
        `₹${total.toLocaleString('en-IN')} limit` : 
        `₹${dailySuggested.toLocaleString('en-IN')}/day suggested`;
    });
    
    // Update category cards
    const categoriesContainer = document.querySelector('.budget-categories');
    categoriesContainer.innerHTML = categories.map(category => {
      const percent = (category.spent / category.budget) * 100;
      const isOverBudget = percent > 100;
      
      return `
        <div class="budget-category">
          <div class="category-info">
            <div class="category-icon" style="color: ${category.color}">
              <i class="fas ${category.icon}"></i>
            </div>
            <div>
              <div class="category-name">${category.name}</div>
              <div class="category-progress">
                <div class="category-progress-bar ${isOverBudget ? 'warning' : ''}" 
                     style="width: ${Math.min(percent, 100)}%; background-color: ${category.color}"></div>
              </div>
            </div>
          </div>
          <div class="category-amount">₹${category.spent.toLocaleString('en-IN')}/₹${category.budget.toLocaleString('en-IN')}</div>
        </div>
      `;
    }).join('');
  }

  // Render savings goals
  function renderSavingsGoals() {
    const goalsContainer = document.querySelector('.savings-goals');
    goalsContainer.innerHTML = budgetData.savingsGoals.map(goal => {
      const percent = (goal.saved / goal.target) * 100;
      
      return `
        <div class="goal-card" data-id="${goal.id}">
          <div class="goal-header">
            <div class="goal-title">${goal.name}</div>
            <i class="fas ${goal.icon}" style="color: ${goal.color};"></i>
          </div>
          <div class="goal-amount">₹${goal.saved.toLocaleString('en-IN')}/₹${goal.target.toLocaleString('en-IN')}</div>
          <div class="goal-progress">
            <div class="goal-progress-bar" style="width: ${percent}%; background-color: ${goal.color}"></div>
          </div>
          <div class="goal-details">
            <span>${Math.round(percent)}% completed</span>
            <span>₹${(goal.target - goal.saved).toLocaleString('en-IN')} remaining</span>
          </div>
        </div>
      `;
    }).join('');
    
    // Add click handlers to goal cards
    document.querySelectorAll('.goal-card').forEach(card => {
      card.addEventListener('click', function() {
        const goalId = parseInt(this.dataset.id);
        const goal = budgetData.savingsGoals.find(g => g.id === goalId);
        viewGoalDetails(goal);
      });
    });
  }

  // Show create budget modal
  function showCreateBudgetModal() {
    // In a real app, this would show a modal form
    console.log('Create budget clicked');
    alert('Budget creation form would appear here');
    
    // Example of adding a new budget category
    // const newCategory = {
    //   name: 'Entertainment',
    //   icon: 'fa-film',
    //   budget: 3000,
    //   spent: 0,
    //   color: '#9c27b0'
    // };
    // budgetData.monthlyBudget.categories.push(newCategory);
    // renderBudgetData();
  }

  // Show budget settings
  function showBudgetSettings() {
    console.log('Budget settings clicked');
    alert('Budget settings would appear here');
  }

  // Show add goal modal
  function showAddGoalModal() {
    // In a real app, this would show a modal form
    console.log('Add goal clicked');
    alert('Savings goal creation form would appear here');
    
    // Example of adding a new goal
    // const newGoal = {
    //   id: Date.now(),
    //   name: 'New Car',
    //   icon: 'fa-car',
    //   target: 500000,
    //   saved: 0,
    //   color: '#2196f3'
    // };
    // budgetData.savingsGoals.push(newGoal);
    // renderSavingsGoals();
  }

  // View goal details
  function viewGoalDetails(goal) {
    console.log('Viewing goal:', goal.name);
    alert(`Viewing details for ${goal.name} goal\n\n` +
          `Target: ₹${goal.target.toLocaleString('en-IN')}\n` +
          `Saved: ₹${goal.saved.toLocaleString('en-IN')}\n` +
          `Remaining: ₹${(goal.target - goal.saved).toLocaleString('en-IN')}`);
  }

  // Show card options menu
  function showCardOptionsMenu(button, card) {
    console.log('Card options clicked for:', card.querySelector('.budget-card-title').textContent);
    // In a real app, this would show a context menu
    alert(`Options for ${card.querySelector('.budget-card-title').textContent}`);
  }

  // Toggle notifications
  function toggleNotifications() {
    console.log('Notifications clicked');
    document.querySelector('.notification-badge').textContent = '0';
  }

  // Show quick add menu
  function showQuickAddMenu() {
    console.log('Quick add button clicked');
    alert('Quick add transaction menu would appear here');
  }

  // Update notification badge
  function updateNotificationBadge() {
    // Count overdue budgets (spent >= budget)
    const overdueCount = budgetData.monthlyBudget.categories.filter(
      cat => cat.spent >= cat.budget
    ).length;
    
    document.querySelector('.notification-badge').textContent = 
      overdueCount > 0 ? overdueCount : '';
  }

  // Initialize the app
  init();
});
  </script>
</body>
</html>